
<!doctype html><html><body>
<h3>Prueba de pago (Stripe real)</h3>
<label>Monto (centavos): <input id="amt" value="1999"></label><br/>
<label>Moneda: <input id="cur" value="usd"></label><br/>
<button id="go">Crear PaymentIntent</button>
<pre id="out"></pre>
<script>
const out = document.getElementById('out');
document.getElementById('go').onclick = async () => {
  out.textContent = '...';
  try {
    const body = {
      amount: parseInt(document.getElementById('amt').value, 10),
      currency: document.getElementById('cur').value,
      description: 'IGU live check'
    };
    const r = await fetch('/payments/create-intent', {
      method:'POST',
      headers:{'Content-Type':'application/json'},
      body: JSON.stringify(body)
    });
    const txt = await r.text();   // <<< NO forzamos JSON
    out.textContent = txt;
  } catch (e) {
    out.textContent = 'Error: ' + (e?.message || e);
  }
};
</script>
</body></html>
